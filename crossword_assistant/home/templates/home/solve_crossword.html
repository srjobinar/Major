<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
{% load staticfiles %}
<link rel="stylesheet" href="{% static 'home/css/bootstrap.min.css' %}" type = "text/css"/>
<meta name="viewport" content = "width=device-width, initial-scale=1.0">

  <style>
  html,
  body {
    height:100%
  }
  .cell
  { margin-left: 2px;
    margin-top: 2px;
    float: left;
    height: 30px;
    width: 30px;
    background-color: #ccc;

  }
  #abc
  {

    margin-top:100px;
    width:560px;
  }
  .cellNo
  {
    color: #000;
    font-size: 9px;
    margin-left:  2px;
    margin-top: 0px;
  }
  #finish_button
  {
    margin-left:46%;
    margin-top:20px;
  }
  </style>
<script src="{% static 'home/js/jquery.min.js' %}"></script>
<script src="{% static 'home/js/bootstrap.min.js' %}"></script>
<script src="{% static 'home/js/crossword.js' %}"></script>
<script type="text/javascript">
  str =  `<div class='modal-dialog'>
          <div class='modal-content'>
              <!-- Modal Header -->
              <div class='modal-header'>
                  <button type='button' class='close'
                     data-dismiss='modal'>
                         <span aria-hidden='true'>&times;</span>
                         <span class='sr-only'>Close</span>
                  </button>
                  <h4 class='modal-title' id='myModalLabel'>
                      Clue Info
                  </h4>
              </div>

              <!-- Modal Body -->
              <div class='modal-body'>

                  <form class='form-horizontal' role='form' action='/answer' method='post'>
                  <input class="hidden" type="hidden" name="clue_num" value="0">
                  <input class="hidden" type="hidden" name="a_d" value="a">
                      <div class='form-group'>
                      <label  class='col-sm-2 control-label'
                                for='answer'>Answer</label>
                      <div class='col-sm-10'>
                          <input type='text' name='answer' value="" class='form-control'
                          id='answer'/>
                      </div>
                    </div>
                    <div class='form-group'>
                      <div class='col-sm-offset-2 col-sm-10'>
                        <div class='radio'>
                          <label>
                              <input type='radio' value='0' name='type'/> Verb
                          </label>
                        </div>
                        <div class='radio'>
                          <label>
                              <input type='radio' value='1' name='type'/> Noun
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class='form-group'>
                      <div class='col-sm-offset-2 col-sm-10'>
                        <button type='submit' class='btn btn-default'>Submit</button>
                      </div>
                    </div>
                  </form>

              </div>
          </div>
      </div>`;
  $(function(){
 {% for c in data %}

    var k,t,classList;
    var cell={{c.cell_number}};
    $("#n"+cell).text(""+{{c.clue_number}})
    if({{c.across_down}}==1)
          {k=1;
           t='a';
         }
    else{
          k=100;
          t='d';
        }
    for(var i=0;i<{{c.answer_length}};i++)
      {
        $cell = $("#"+cell);
        //console.log($cell);
        //console.log($("#"+cell).css("background-color"));
        $("#"+cell).css("background-color","#fff");
        $("#"+cell).css("cursor","pointer");
        classList=$("#"+cell).attr('class').split(/\s+/);
        if(classList.length==1)
        $("#"+cell).addClass(""+{{c.clue_number}}+t);
        //console.log(cell);
        $("#"+cell).attr('data-target',"#m"+{{c.clue_number}}+t);
        $("#"+cell).attr('data-toggle',"modal");
        cell=cell+k;

      }
      mod = document.createElement('div');
      mod.className = "modal fade";
      mod.id = "m"+{{c.clue_number}}+t;
      document.getElementById("modal_container").appendChild(mod)
      //document.write(i);

      $("#m"+{{c.clue_number}}+t).attr('tabindex',"-1");
      $("#m"+{{c.clue_number}}+t).attr('role',"dialog");
      html = $.parseHTML(str);
      $("#m"+{{c.clue_number}}+t).append(html);
      u = $("#m"+{{c.clue_number}}+t+" input.hidden[name='clue_num']");
      u.val({{c.clue_number}});
      console.log(u.val());
      v = $("#m"+{{c.clue_number}}+t+" input[name='a_d']");
      v.val(t);
      console.log(v.val());

{% endfor %}

  });


  </script>

</head>
<body class="body" style="background-color:#ccc">

    <div id="abc" class="container" ></div>
    <div id="modal_container"></div>

</body>
</html>
